const glob=require("glob"),{urlJoin,pathResolve,getProjectDir,inProject,inCoreRoot,inCoreSrc,inCoreSrcRelative,getModulesStatic}=require("./utils/path-utils"),appConfig=require("../config/utils/get-full-config"),ENV=process.env,CURRENT_FILE_PATH=__dirname,srcDir="src",buildDir=".build",assetsDir="assets",publicPath=urlJoin("/",appConfig.common.app.contextRoot),hasContextRoot="/"!==publicPath,staticPath="./static",clientStartPath="./src/client/index.js",serverStartPath="./src/server/index.js",coreAppStyleConfig=require(inProject(inCoreSrcRelative("common/app-style/vars.js"))),context={PROCESS_PATH:getProjectDir(),ENV,srcDir,buildDir,assetsDir,HOT_RELOAD_PREFIX:"hot",staticPaths:[pathResolve(CURRENT_FILE_PATH,"..",staticPath),...getModulesStatic(inCoreSrc())],publicPath,clientStartPath,serverStartPath,inProject,inCoreRoot,inCoreSrcRelative,inCoreSrc,inProjectSrc(...a){return this.inProject(this.srcDir,...a)},inProjectBuild(...a){return this.inProject(this.buildDir,...a)},inProjectBuildAssets(...a){return this.inProjectBuild(this.assetsDir,...a)},appConfig,appStyleConfig:coreAppStyleConfig,ASSETS_BASE_QUERY:{name:urlJoin(hasContextRoot?"/":"",assetsDir,"[name].[hash].[ext]"),limit:1e4,publicPath:hasContextRoot?publicPath:void 0},isProduction:"production"===ENV.NODE_ENV,isLocalhost:"localhost"===ENV.NODE_ENV,compileNodeModules:[]};context.inProjectSrc=context.inProjectSrc.bind(context),context.inProjectBuild=context.inProjectBuild.bind(context),context.inProjectBuildAssets=context.inProjectBuildAssets.bind(context),module.exports=context;