const{tryLoadProjectFile}=require("../build-scripts/utils/require-utils"),context=tryLoadProjectFile("build-scripts/webpack-context"),packageJson=require("../package.json");module.exports=function(a=!1){process.env.BABEL_MODE=process.env.BABEL_MODE||a?"server":"client",require("./update-babelrc"),console.info("babel-register");const b=[packageJson.name,...context.compileNodeModules].map(a=>`${a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}\\/`).join("|");require("babel-register")({ignore:new RegExp(`\\/node_modules\\/(?!${b})`)})};