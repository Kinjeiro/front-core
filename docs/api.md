<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Runners][1]
-   [AbstractClientRunner][2]
    -   [getReducers][3]
-   [CoreClientRunner][4]
    -   [getReducers][5]
-   [AbstractServerRunner][6]
-   [CoreServerRunner][7]
-   [Navigation][8]
-   [createStatusesReducer][9]
-   [apiLoadRecords][10]
-   [createFilteredReducer][11]
-   [createReducer][12]
-   [clientConfig][13]
-   [initConfig][14]
-   [bemDecorator][15]
-   [ThemeProvider][16]
-   [theme][17]
-   [className][18]
-   [FROM_BOOM][19]
-   [FROM_BOOM_RESPONSE][20]
-   [FROM_BOOM_ERROR][21]
-   [clientErrorMessage][22]
-   [uniMessage][23]
-   [parseFromBoom][24]
-   [parseFromBoomResponse][25]
-   [parseFromBoomError][26]
-   [BaseApiClientClass][27]
    -   [ajaxGet][28]
    -   [ajaxPost][29]
    -   [proceedRequest][30]
-   [valueFromRange][31]
-   [findInTree][32]
-   [arrayToTree][33]
-   [createApiConfig][34]
-   [createApiConfig][35]
-   [titledDecorator][36]
-   [updatePathIfChange][37]
-   [onPropsUpdate][38]
-   [onStatusPropUpdate][39]
-   [formatDate][40]
-   [init][41]
-   [translateDefault][42]
-   [i18nContextProvider][43]
-   [isEmpty][44]
-   [DEFAULT_LOGGER_IDS][45]
-   [contextData][46]
-   [register][47]
-   [method][48]
-   [method][49]
-   [remoteJwt][50]
-   [prepare-state][51]
-   [createServices][52]
-   [ServiceAuth][53]
-   [createProxyWrapperCallback][54]
-   [apiPluginFullFactory][55]
-   [apiPluginFactory][56]
-   [proxyRoute][57]
-   [proxyRoutePluginFactory][58]
-   [createEndpointServiceConfig][59]
-   [HOST][60]
-   [SERVICES_HOST][61]
-   [REQUEST_TIMEOUT][62]
-   [sendSimpleRequest][63]
-   [sendEndpointMethodRequest][64]
-   [factoryEndpointServiceMethodRequest][65]
-   [proceedRequest][66]

## Runners

Освновные расширяемые класс по управлению клиентом и сервером


## AbstractClientRunner

Абстракный класс для точечной настройки процесса запуска клиентской (браузерной) части приложения

**Parameters**

-   `runnerOptions`   (optional, default `{}`)
-   `htmlContainerId`  id дива, в котором будет разворачиваться реатовское приложение

### getReducers

для hot reload необходимо загружать через require

Returns **{}** 

## CoreClientRunner

**Extends AbstractClientRunner**

Расширение для установки core зависимостей по redux и импорт данных, пришедших с сервера при отрисовки

### getReducers

Возвращаем мапу редьюсеров

Returns **any** 

## AbstractServerRunner

Абстрактный класс для серверного ранера, икапсулирующий логику запуска node js сервера hapi

**Parameters**

-   `runnerOptions`   (optional, default `{}`)

## CoreServerRunner

**Extends AbstractServerRunner**

Расширение для установки core зависимостей

## Navigation

остальное


## createStatusesReducer

**Parameters**

-   `typesArray` **...any** один или несколько массивов, в каждом по три types. Первый - fetch, второй - success, третий - fail

## apiLoadRecords

апи который возвращает { meta, records }, либо массив, когда мультипейджинг не нужен

## createFilteredReducer

Проверяет по action

**Parameters**

-   `reducerFunction`  
-   `reducerPredicate`  

Returns **function (any?, any?)** 

## createReducer

Удобное создание редьюсеров (без лишних switch-case условий)

**Parameters**

-   `initialState`  
-   `handlers`  key - action type, value - caseReducer
-   `fieldsHandlers`  
-   `defaultHandler`  

Returns **reducer** 

## clientConfig

Располагается в common, так как используется для инициализации и на серверной части тоже для компонентов

## initConfig

Конфиги для клиента - это только лишь часть общих конфигов, которые поставляются на клиент вместе с initialState для стора при формировании html страницы

**Parameters**

-   `inputConfig`  

Returns **{}** 

## bemDecorator

Компонент для того, чтобы не писать bind функции c ключом
В основном используется, чтобы улучшить производительность - не биндить фунции внутри render каждый раз при перерисовки (а она оооочень частая)
См. [https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-no-bind.md#lists-of-items][67]

## ThemeProvider

**Extends Component**

Компонент задающий тему для своих дочерних компонентов.
Важно! Может содержать в себе строго один дочерний компонент.

## theme

Тема компонента

## className

Дополнительный класс

## 

**Meta**

-   **deprecated**: use src/routes-pathes.js


## FROM_BOOM

[https://github.com/hapijs/boom][68]

## FROM_BOOM_RESPONSE

**Meta**

-   **deprecated**: старый формат


## FROM_BOOM_ERROR

**Meta**

-   **deprecated**: старый формат


## clientErrorMessage

**Meta**

-   **deprecated**: use clientErrorMessages


## uniMessage

**Meta**

-   **deprecated**: use uniMessages


## parseFromBoom

[https://github.com/hapijs/boom][68]

-   isBoom - if true, indicates this is a Boom object instance. Note that this boolean should only be used if the error is an instance of Error. If it is not certain, use Boom.isBoom() instead.
-   isServer - convenience bool indicating status code >= 500.
-   output - the formatted response. Can be directly manipulated after object construction to return a custom error response. Allowed root keys:
-   statusCode - the HTTP status code (typically 4xx or 5xx).
-   headers - an object containing any HTTP headers where each key is a header name and value is the header content.
-   payload - the formatted object used as the response payload (stringified). Can be directly manipulated but any changes will be lost if reformat() is called. Any content allowed and by default includes the following content:
-   statusCode - the HTTP status code, derived from error.output.statusCode.
-   error - the HTTP status message (e.g. 'Bad Request', 'Internal Server Error') derived from statusCode.
-   message - the error message derived from error.message.

// - message - the error message.
// - typeof - the constructor used to create the error (e.g. Boom.badRequest).

-   inherited Error properties.

**Parameters**

-   `errorOrResponse`  
-   `uniErrorData`   (optional, default `{}`)

## parseFromBoomResponse

**Parameters**

-   `errorOrResponse`  
-   `uniErrorData`   (optional, default `{}`)

**Meta**

-   **deprecated**: старый формат


## parseFromBoomError

**Parameters**

-   `boomError`  
-   `uniErrorData`   (optional, default `{}`)

**Meta**

-   **deprecated**: старый формат


## BaseApiClientClass

Класс для отсылки запросов на сервер

**Parameters**

-   `apiClientOptions`   (optional, default `{}`)

### ajaxGet

Используется для загрузки НЕ АПИ методов при настроенном на один хост клиент апи (для апи использовать client.post \\ client.get)

**Parameters**

-   `absoluteUrl`  
-   `params`  
-   `options`  

Returns **any** 

### ajaxPost

Используется для загрузки НЕ АПИ методов при настроенном на один хост клиент апи

**Parameters**

-   `absoluteUrl`  
-   `data`  
-   `options`  

Returns **any** 

### proceedRequest

object of that fields

**Parameters**

-   `requestOptions`  
-   `url`  
-   `method`  
-   `urlRelative`  
-   `params`  
-   `data`  
-   `pathParams`  
-   `serializer`  
-   `deSerializer`  
-   `type`  
-   `contentType`  
-   `headers`  
-   `timeout`  
-   `mock`  boolean - use mock on demand,
    function(requestOptions, error, response){} - execute for result
    other - result
-   `mockFilter`  function(requestOptions, error, response) {}

Returns **[Promise][69]** 

## valueFromRange

Примеры
 valueFromRange( 0, [0, 5, 8, 15, 20], [a, b, c, d], 'Y') => 'a'
 valueFromRange(13, [0, 5, 8, 15, 20], [a, b, c, d], 'Y') => 'c'
 valueFromRange(20, [0, 5, 8, 15, 20], [a, b, c, d], 'Y') => 'd'
 valueFromRange(25, [0, 5, 8, 15, 20], [a, b, c, d], 'Y') => 'Y'

**Parameters**

-   `inputValue`  
-   `inputValueRanges`  
-   `outputValueRanges`  кол-во на одно меньше чем inputValueRanges
-   `defaultValue`  

## findInTree

**Parameters**

-   `tree`  
-   `id`  
-   `config`   (optional, default `{}`)
-   `deep`   (optional, default `0`)
-   `path`   (optional, default `[]`)
-   `pathStr`   (optional, default `''`)

**Meta**

-   **deprecated**: user tree-utils.js::findInTree


## arrayToTree

**Parameters**

-   `array`  
-   `options`   (optional, default `{}`)
-   `parent`   (optional, default `null`)
-   `level`   (optional, default `0`)

**Meta**

-   **deprecated**: use tree-utils.js arrayToTree


## createApiConfig

Создание настроек для клиенской части и их роутинг через плагину на серверной

**Parameters**

-   `path`  
-   `method`  
-   `payload`  

Returns **({method, path, payload} | any)** 

## createApiConfig

Создание настроек для клиенской части и их роутинг через плагину на серверной

**Parameters**

-   `path`  
-   `method`  
-   `payload`  

Returns **({method, path, payload} | any)** 

## titledDecorator

Декорирует компонент, проставляя указанные данные в заголовок и в хедар документа

**Parameters**

-   `id`  
-   `title`  
-   `metas`  html head meta tags for current page [description, keywords, author, robots, googlebot, google and e.t.]
                   (для CEO, используется в Server Side Rendering, отдачавая поисковым ботам инфу о конкретной странице)
-   `otherInfo`  

Returns **function (any)** import { getCurrentPage } from '../../../app-redux/selectors';

## updatePathIfChange

**Parameters**

-   `path`  
-   `deepEqual`  
-   `singleRun`  
-   `handler`  
-   `context`  
-   `newProps`  
-   `oldProps`  
-   `isInit`  

Returns **any** возвращает true - если нужно прервать последующие обработчики, либо false если продолжать

## onPropsUpdate

Таргет метод для обновления данных, если меняются пропсы наденные по пути propertyPath
Срабатывает как при инициализации (componentWillMount), так и в будущем при componentWillReceiveProps

Большая проблема была в том, что зависимость от redux данных проявляется как при старте приложения так и при обновлении пропсов.
Но в реакте сделано так что componentWillReceiveProps не дергается при инициализации, поэтому постоянно приходилось писать 2 метода для одних и техже частей пропсов
Поэтому создал декоратор, тарнет метод которого автоматически срабатывает и при componentWillMount и при componentWillReceiveProps

**Parameters**

-   `propertyPath`  -   если пусто - то target метод срабатывает если props компонента
    -   если function - функция вызывается дважды, один раз для newProps второй раз для oldProps - на вход который подаются пропсы, вернуть должна часть props по которой будет deep equals
    -   если string - путь в props для объектов которые будут сравниваться
    -   если string array - если больше 1 то singleRun по умолчанию true
-   `$1` **[Object][70]**  (optional, default `{}`)
    -   `$1.deepEqual`   (optional, default `true`)
    -   `$1.singleRun`   (optional, default `true`)
    -   `$1.oldPropsNotNull`   (optional, default `true`)
    -   `$1.afterCustomFilter`  
-   `deepEqual`  (default true)-   true - глубокое сравнение
    -   false - мутабельные (массивы, объекты) - по ссылкам, инмутабельные (стринги, числа) - по контенту
-   `singleRun`  (по умолчанию true если propertyPath - это массив и больше 1 элемента)-   true - выполнять вызов не для каждого отдельно, а один раз для всех, при этом newObj \\ oldObj меняются на массив, соотвественно порядку в path
        (часто возникающая ситуация при инициализации когда все пасы считаются новыми и происходит дублирование вызовов)
-   `oldPropsNotNull`  
-   `afterCustomFilter`  

Returns **function (newProps, {newProps, oldProps, newObj, oldObj, path, isInit})** newObj \\ oldObj \\ path - меняются на массив, если singleRun - true-   если вернуть true, то все последующие методы не будут запущены.
    Обычно true возвращается тогда, когда идет явно изменение state и нужно чтобы react-redux прошел новый цикл и подставил в последующие методы уже обновленную информациюПример,
export default class AccountAndSite extends Component {
static propTypes = {
accountId: PropTypes.number,
...
}
...

## onStatusPropUpdate

Метод для работы со статусами - см \\src\\stub\\app-redux\\helpers\\create-status-reducer.js

**Parameters**

-   `statusPropPath`  

Returns **[function][71]** 

## formatDate

Переводит дату из формата '2016-01-26' в формат '26 января 2016' или 26.1.2016.

**Parameters**

-   `date` **[String][72]** Строка даты в формате `YYYY-MM-DD`
-   `options` **[Object][70]?** Список опций
    -   `options.fullMonth` **[Boolean][73]** Если `true`, то название месяца, иначе номер (optional, default `true`)
    -   `options.cutCurrentYear` **[Boolean][73]** Если `true`, то дата без указания года (optional, default `true`)

Returns **[String][72]** Cтрока даты в формате `DD month YYYY или DD.MM.YYYY`

## init

Метод инициализации настроек
Используется отдельно на клиенте и отдельно на сервере

**Parameters**

-   `newI18nInstance`  

## translateDefault

Translate - see \\lk\\front\\src\\i18n\\ru\\common.json

**Parameters**

-   `key`  
-   `mapParams`  ( defaultValue props include )
-   `namespace`  

Returns **any** 

## i18nContextProvider

чтобы каждый раз не писать префиксы для конкретного компонента

Пример:
import {i18nContextProvider}
const i18n = i18nContextProvider('components.MyComponent');
console.log(i18n('core:keyForMyComponent')); //components.MyComponent.keyForMyComponent

**Parameters**

-   `context`  

Returns **[Function][71]** 

## isEmpty

**Parameters**

-   `value`  
-   `objectChecker`   (optional, default `null`)

**Meta**

-   **deprecated**: use common.js::isEmpty
    // todo @ANKU @LOW - удалить когда удалим методы дерева из common.js (чтобы взаимных ссылок не было) и оттуда будем пользоваться


## DEFAULT_LOGGER_IDS

Которые определены в конфигах

## contextData

любые контекстные данные при запуске приложения

## register

Усорвешенствованная библиотека hapi-i18next (репо версия устарела для i18next)

**Parameters**

-   `server`  
-   `options`  
-   `next`  

## method

Returns fresh i18next instance for each request, to prevent cache pollution

## method

This method is a facade for i18next's bundled 't' method. We wrap it so that we can
pass an extra language parameter for Hapi server.method caching (so you can generate keys based on languages
and avoid cache pollution)

## remoteJwt

token - это токен сотрудника банка

**Parameters**

-   `server`  
-   `pluginOptions`  

Returns **{authenticate: authenticate}** 

## prepare-state

загрузка необходимых вначале общих данных из различных сервисов (в данном случае organizations и profiles

**Parameters**

-   `request`  
-   `server`  
-   `defaultState`  
-   `pluginOptions`  

Returns **{}** 

## createServices

Метод для создания сервисов

**Parameters**

-   `endpointServiceConfigs`  

## ServiceAuth

Клиенсткая реализация протокола OAuth 2.0 Bearer

**Parameters**

-   `endpointServiceConfig` **[Object][70]** 
    -   `endpointServiceConfig.endpointServiceConfig`  
    -   `endpointServiceConfig.urls`  

Returns **{authValidate, authLogin}** 

## createProxyWrapperCallback

**Parameters**

-   `handler`  (proxyPayload, requestData, apiRequest, newReply, proxyResponse, pluginOptions) => {}
-   `apiRequest`  
-   `pluginOptions`  

Returns **function (any?, any?, any?)** 

## apiPluginFullFactory

Подключена проверка пермишенов, логгинг, проксирование (и авторизация)

**Parameters**

-   `apiConfig`  
-   `options`  
-   `handler`  Можно не использовать reply, если возвращаем не response, то идет вызов reply автоматически с
      результатом в качестве аргумента
-   `permissions`  
-   `checkPermissionStrategy`  
-   `routeConfig`  
-   `isLogging`  

Returns **any** function(apiRequestData, request, reply) {}

## apiPluginFactory

**Parameters**

-   `apiConfig`  
-   `handler`  (payload, apiRequest, reply, pluginOptions) => {}
-   `otherOptions`  permissions-   checkPermissionStrategy
    -   routeConfig
    -   isLogging

## proxyRoute

**Parameters**

-   `path`  you can user wildcard (\*) or h2o2 format: \\path{otherPart}
-   `proxy`  string \\ mapUri function \\ h2o2 options (proxyOptions) - [https://github.com/hapijs/h2o2][74] (add support { apiPrefix: 'serviceApiPath' })
             server.route({ method: 'GET', path: '/handlerTemplate/{a}/{b}', handler: { proxy: { uri: '[http://localhost:][75]' + upstream.info.port + '/item/{a}/{b}' } } });
-   `otherOptions`  если только функция, значит это handler-   handler - (payload, requestData, apiRequest, reply, proxyResponse, pluginOptions) => {}
    -   permissions
    -   checkPermissionStrategy
    -   routeConfig
    -   isLogging

## proxyRoutePluginFactory

**Parameters**

-   `path`  
-   `proxy`  
-   `otherOptions`  

**Meta**

-   **deprecated**: use proxyRoute


## createEndpointServiceConfig

Это настройка для набора сервисов, который после подключения спец библиотек (Thrift или оберток над Rest)
позволяют дергать свое апи через методы с переменными
(вся логика выстраивания пути до rest сервисов, инкапсулирована внутри).
Это позволяет их легко переиспользовать, в том числе и в других проектах.

**Parameters**

-   `$0` **[Object][70]** 
    -   `$0.protocol`   (optional, default `'http'`)
    -   `$0.host`   (optional, default `'localhost'`)
    -   `$0.port`   (optional, default `80`)
    -   `$0.endpoint`   (optional, default `''`)
    -   `$0.timeout`  
    -   `$0.fullUrl`  
-   `protocol`  
-   `host`  
-   `port`  
-   `endpoint`  
-   `timeout`  

Returns **{protocol: [string][72], host: [string][72], port: [number][76], endpoint: [string][72], fullUrl: [string][72], timeout: any}** 

## HOST

Марафон при запуска автоматически добавляет адресс хоста в эту переменную

## SERVICES_HOST

Когда запускаем на localhost или нужно на стендах зашить

## REQUEST_TIMEOUT

Первый запуск мидловых сервисов бывает до 20 сек

## sendSimpleRequest

**Parameters**

-   `requestOptions`  [https://www.npmjs.com/package/request][77]

Returns **[Promise][69]** 

## sendEndpointMethodRequest

1) Обычено чтобы указать тип необходимых данных через TypeScript, делают такую обертку (чтобы data была в параметрах):
export default function serviceMethodsFactory(endpointServiceConfig) {
function findTariffByInn(data: DataTypeScript, ...other) {
return sendEndpointMethodRequest(endpointServiceConfig,
'/all', 'get', data, ...other);
}

return {
findTariffByInn
};
}

2) либо можете просто использовать фабрику (он сам все данные пробросит)
findTariffByInn: factoryEndpointServiceMethodRequest(endpointServiceConfig, 'tariff', 'get')

**Parameters**

-   `endpointServiceConfig`  
-   `serviceMethodPath`  
-   `method`  
-   `data`  
-   `apiRequest`  
-   `requestOptions`  [https://www.npmjs.com/package/request][77]
-   `logger`  

Returns **any** 

## factoryEndpointServiceMethodRequest

Реализует запрос до

**Parameters**

-   `endpointServiceConfig`  
-   `serviceMethodPath`  
-   `method`  
-   `data`  
-   `requestOptions`  
-   `logger`  

Returns **[Promise][69]&lt;any>** 

## proceedRequest

**Parameters**

-   `requestOptions`  see [https://hapijs.com/api#serverinjectoptions-callback][78]
-   `server`  

Returns **any** Promise

[1]: #runners

[2]: #abstractclientrunner

[3]: #getreducers

[4]: #coreclientrunner

[5]: #getreducers-1

[6]: #abstractserverrunner

[7]: #coreserverrunner

[8]: #navigation

[9]: #createstatusesreducer

[10]: #apiloadrecords

[11]: #createfilteredreducer

[12]: #createreducer

[13]: #clientconfig

[14]: #initconfig

[15]: #bemdecorator

[16]: #themeprovider

[17]: #theme

[18]: #classname

[19]: #from_boom

[20]: #from_boom_response

[21]: #from_boom_error

[22]: #clienterrormessage

[23]: #unimessage

[24]: #parsefromboom

[25]: #parsefromboomresponse

[26]: #parsefromboomerror

[27]: #baseapiclientclass

[28]: #ajaxget

[29]: #ajaxpost

[30]: #proceedrequest

[31]: #valuefromrange

[32]: #findintree

[33]: #arraytotree

[34]: #createapiconfig

[35]: #createapiconfig-1

[36]: #titleddecorator

[37]: #updatepathifchange

[38]: #onpropsupdate

[39]: #onstatuspropupdate

[40]: #formatdate

[41]: #init

[42]: #translatedefault

[43]: #i18ncontextprovider

[44]: #isempty

[45]: #default_logger_ids

[46]: #contextdata

[47]: #register

[48]: #method

[49]: #method-1

[50]: #remotejwt

[51]: #prepare-state

[52]: #createservices

[53]: #serviceauth

[54]: #createproxywrappercallback

[55]: #apipluginfullfactory

[56]: #apipluginfactory

[57]: #proxyroute

[58]: #proxyroutepluginfactory

[59]: #createendpointserviceconfig

[60]: #host

[61]: #services_host

[62]: #request_timeout

[63]: #sendsimplerequest

[64]: #sendendpointmethodrequest

[65]: #factoryendpointservicemethodrequest

[66]: #proceedrequest-1

[67]: https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-no-bind.md#lists-of-items

[68]: https://github.com/hapijs/boom

[69]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[70]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[71]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[72]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[73]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[74]: https://github.com/hapijs/h2o2

[75]: http://localhost:

[76]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[77]: https://www.npmjs.com/package/request

[78]: https://hapijs.com/api#serverinjectoptions-callback
